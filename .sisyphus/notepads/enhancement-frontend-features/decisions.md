# Decisions - Frontend Feature Enhancement

*Last Updated: 2026-01-27*

## Architecture Decisions

**页面优先级**：
1. 登录页面 - 依赖（其他页面需要先登录）
2. Authors列表页面 - 独立（无需登录可访问）
3. 文章创建页面 - 依赖（需要登录）
4. 个人中心页面 - 依赖（需要登录）

## Task 1 Decisions (登录页面)

**实现方式**：客户端JWT令牌管理
- 使用localStorage存储access token和refresh token
- 自动刷新access token（快过期时）
- 登出时清除所有令牌

**表单字段**：
- Email（邮箱）
- Password（密码）
- 不添加"记住我"选项（简化实现）

**错误处理**：
- 后端返回401 → 显示"邮箱或密码错误"
- 后端返回403 → 显示"未找到用户"
- 网络错误 → 显示"暂时无法登录"

## Task 2 Decisions (Authors列表页面)

**布局设计**：
- 复用posts页面的卡片布局
- 每个作者显示为卡片
- 卡片包含：头像、昵称、简介

**分页策略**：
- 使用后端API的分页参数（limit, offset）
- 默认每页显示10个作者
- 添加"加载更多"按钮

**空状态**：
- 显示"还没有作者。"
- 与posts页面的空状态保持一致

## Task 3 Decisions (文章创建页面)

**编辑器选择**：
- 使用简单的textarea（富文本编辑器超出范围）
- 支持Markdown语法（后端验证）
- 占位符："输入文章内容（支持Markdown）"

**表单验证**：
- 标题：必填，最大100字符
- 内容：必填，最小10字符
- 分类：可选，从后端API获取
- 标签：可选，逗号分隔的文本输入

**提交流程**：
- 使用POST方法到/api/v1/posts
- 成功后重定向到新创建的文章详情页
- 失败时显示后端返回的错误消息

**暂不实现**：
- 图片上传集成（单独的upload页面已存在）
- 实时预览（保持简单）
- 草稿功能（需要后端支持）

## Task 4 Decisions (个人中心页面)

**数据获取**：
- GET /api/v1/me获取用户信息
- 初始加载时显示"加载中..."

**编辑功能**：
- 查看模式：只读，显示头像、昵称、简介
- 编辑模式：可修改昵称、简介
- 保存按钮使用PUT方法到/api/v1/me

**头像上传**：
- 导航到/upload页面
- 上传成功后更新profile头像URL

**密码修改**：
- 独立区域（可折叠）
- 当前密码验证（可选）
- 新密码输入（可选）
- 确认密码输入

**暂不实现**：
- 账户删除
- 邮箱修改
- 手机号绑定

## Pending Decisions

- [ ] 暗色模式支持
- [ ] 富文本编辑器集成
- [ ] 评论系统集成
- [ ] 点赞/收藏功能集成
